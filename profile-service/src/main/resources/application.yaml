server:
  port: 8082
  servlet:
    context-path: /profile
spring:
    application:
        name: profile-service
    neo4j:
      uri: bolt://localhost:7687
      authentication:
        username: ${NEO4J_USERNAME}
        password: ${NEO4J_PASSWORD}

        # --- Cấu hình Kafka ---
    kafka:
      bootstrap-servers: ${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
      consumer:
        group-id: profile-service-group
        auto-offset-reset: earliest
        key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
        value-deserializer: io.confluent.kafka.serializers.KafkaAvroDeserializer

        # ĐÚNG: Phải đặt trong khối `properties` như thế này
        properties:
          schema.registry.url: http://localhost:8081
          specific.avro.reader: true

      listener:
        type: batch
        ack-mode: manual_immediate
        missing-topics-fatal: false
        properties:
          spring.json.trusted.packages: "*"
        dlt:
          enabled: true
          suffix: .dlt
          producer:
            key-serializer: org.apache.kafka.common.serialization.StringSerializer
            value-serializer: org.springframework.kafka.support.serializer.JsonSerializer
            properties:
              spring.json.add.type.headers: false


      # --- Cấu hình tùy chỉnh cho DLT ---
app:
  kafka:
    dlt:
      topic: user.user.created.v1.DLT